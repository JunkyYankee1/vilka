# База данных: как применять сиды и обновления

## Первый запуск
- `docker compose up --build` — Postgres поднимется пустым и применит все файлы из `db/init/*.sql` (первоначальная схема + данные).

## Когда вы добавляете новые блюда/категории
- Для существующей БД entrypoint **не** повторно применяет `db/init`. Используйте дополнительный сид:
  - SQL: `db/seeds/02_seed_extra.sql` (идемпотентный, с `ON CONFLICT DO NOTHING`).
  - Запуск (файл уже смонтирован в контейнер в `/db/seeds`):
    ```bash
    docker compose exec postgres psql -U kasashka -d kasashka_db -f /db/seeds/02_seed_extra.sql
    ```
  - После выполнения новые категории и блюда появляются в каталоге (включая шаурму без фото — увидите плейсхолдер "пока ещё нет фото!").

## Полное обнуление (не обязательно)
- Если нужно пересоздать БД с нуля: `docker compose down -v && docker compose up --build`.

## Примечания
- `02_seed_extra.sql` можно запускать сколько угодно раз: он безопасно пропускает уже вставленные записи и обновляет sequence.

